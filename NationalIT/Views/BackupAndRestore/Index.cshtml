@model List<NationalIT.Models.BackupModel>
@{
    ViewBag.Title = "Backup and restore database";
}
<script type="text/javascript">    
    function Loading(name) {
        if (confirm('Are you sure Restore database?')) {
            $(".row-fluid").css('opacity', '0.4');
            $("#dvloader").css({ "opacity": "1", "display": "block" });
            $.ajax({
                url: '@Url.Action("RestoreByID", "BackupAndRestore")',
                data: { 'name': name },
                complete: function () {
                    hideLoading();
                }
            });
        }
    }
    function DeleteBackupData(name) {
        if (confirm('Are you sure DELETE this file backup database?')) {
            $.ajax({
                url: '@Url.Action("DeleteBackupDatabaseByID", "BackupAndRestore")',
                data: { 'name': name },
                dataType: 'json',
                success: function (data) {
                    if (data.IsSuccess) {
                        reloadTableBackupFile();
                    } else {
                        alert(data.Message);
                    }
                }
            });
        };
    }
    function hideLoading() {
        $(".row-fluid").css('opacity', '1');
        $("#dvloader").slideUp();
    }
    function reloadTableBackupFile() {
        $.ajax({
            url: '@Url.Action("Index", "BackupAndRestore")',
            success: function (data) {
                $('#RestoreData').html(data);
            }
        });
    }
</script>
<div class="row-fluid dataTables_wrapper" style="min-width: 750px;">
    <div class="span12">
        <h3 class="heading">
            List file backup database on server local</h3>
        <div class="SaoLuuHide">
            @if (ViewBag.ShowBackupMenu != null && (bool)ViewBag.ShowBackupMenu)
            {
                <a class="btn btn-info" href="@Url.Action("Backup", "BackupAndRestore")">
                    <i class="splashy-box_okay"></i>&nbsp;Backup</a>
                <a class="btn btn-info" href="@Url.Action("Upload", "BackupAndRestore")">
                    <i class="splashy-box_okay"></i>&nbsp;Upload</a>
            }
        </div>
        <div id="RestoreData">
            @Html.Partial("_RestorePartial", Model)
        </div>
    </div>
</div>
<div style="display: none; text-align: center" id="dvloader">
    <img src="../../Content/img/loader6.gif" alt="loading" />
</div>
<div class="modal hide fade" id="BackupBox">
</div>
