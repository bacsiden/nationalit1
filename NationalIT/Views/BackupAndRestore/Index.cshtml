@using System.Xml.Linq;
@model List<XElement>
@{
    ViewBag.Title = "Backup and restore database";
}
@*<script src="@Url.Content("~/Scripts/lib/sticky/sticky.min.js")" type="text/javascript" ></script>
<link rel="stylesheet" href="@Url.Content("~/Scripts/lib/smoke/themes/gebo.css")" />
<script src="@Url.Content("~/Scripts/MyScripts/jquery.blockUI.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MyScripts/WaitingPage.js")" type="text/javascript"></script>*@
<script type="text/javascript">
    $(document).ready(function () {
    });
    function Loading(id) {
        if (confirm('Are you sure Restore database?')) {
            $(".row-fluid").css('opacity', '0.4');
            $("#dvloader").css({ "opacity": "1", "display": "block" });
            $.ajax({
                url: '@Url.Action("RestoreByID", "BackupAndRestore")',
                data: { 'id': id },
                complete: function () {
                    hideLoading();
                }
            });
        }
    }
    function DeleteBackupData(id) {
        if (confirm('Are you sure DELETE this file backup database?')) {
            $.ajax({
                url: '@Url.Action("DeleteBackupDatabaseByID", "BackupAndRestore")',
                data: { 'id': id },
                dataType: 'json',
                success: function (data) {
                    if (data.IsSuccess) {
                        alert(data.Message);
                        reloadTableBackupFile();
                    } else {
                        alert(data.Message);
                    }
                }
            });
        };
    }
    function hideLoading() {
        $(".row-fluid").css('opacity', '1');
        $("#dvloader").slideUp();
    }
    function reloadTableBackupFile() {
        $.ajax({
            url: '@Url.Action("Index", "BackupAndRestore")',
            success: function (data) {
                $('#RestoreData').html(data);
            }
        });
    }
</script>
<div class="row-fluid dataTables_wrapper" style="min-width: 750px;">
    <div class="span12">
        <h3 class="heading">
            List file backup database</h3>
        <div class="SaoLuuHide">
            @if (ViewBag.ShowBackupMenu != null && (bool)ViewBag.ShowBackupMenu)
            {
                <a class="btn btn-info Backup" data-toggle="modal" data-backdrop="static" href="#BackupBox">
                    <i class="splashy-box_okay"></i>&nbsp;Backup</a>
            }
        </div>
        <div id="RestoreData">
            @Html.Partial("_RestorePartial", Model)
        </div>
    </div>
</div>
<div style="display: none; text-align: center" id="dvloader">
    <img src="../../Content/img/loader6.gif" alt="loading" />
</div>
<div class="modal hide fade" id="BackupBox">
</div>
